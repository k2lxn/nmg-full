<div class='calculator'>

<h1><%= @calculator.name %></h1>


<% fields = @calculator.input_fields %>

<!-- select tag options, var names match InputField "options" attr values  -->
<% select_options = {"term_options" => ["15yr", "30yr"], 
							"rate_options" => (3.0..5.5).step(0.125),
							"down_options" => (10.0..30.0).step(0.25)} %>

<!-- create input fields -->
<%= form_tag do %>
	<% fields.each do |field| %>
		<%= label_tag(field.name) %>

		<% if field.tag == "select" %>
			<% if field.options.nil? == false %>
				<%= select_tag field.name, options_for_select(select_options[field.options]) %>
			<%else%>
				<%= select_tag field.name %>			
			<%end%>
			
		<% elsif field.tag == "text" %>	
			<%= text_field_tag(field.name) %>
		<%end%>
		
	<%end%>
	
	<%= submit_tag("Calculate") %>
	
<%end%>


<h2>Result: <%= @result %></h2>

</div>  <!-- close .calculator -->





